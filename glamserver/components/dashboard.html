<!--
 * @ Name:
 * @ Author: Ramel NiÃ±o O. Empleo
 * @ Create Time: 2022-11-10 19:05:02
 * @ Modified by: Ramel NiÃ±o O. Empleo
 * @ Modified by: Ramel NiÃ±o O. Empleo3
 * @ Modified time: 2022-12-08 22:14:58
 -->
<div class="container-scroller">
  <div class="container-fluid page-body-wrapper">
    <div id="leftSideNavigation" style="float: left;"></div>
    <div class="main-panel">
      <div class="content-wrapper">
        <div class="row">
          <div class="col-sm-12">
            <div class="home-tab">
              <div class="d-sm-flex align-items-center justify-content-between border-bottom">
                <ul class="nav nav-tabs" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active ps-0" id="home-tab" data-bs-toggle="tab" href="javascript:void(0)" role="tab" aria-controls="overview" aria-selected="true"><i class="mdi mdi-shape-plus"></i> Overview</a>
                  </li>
                </ul>
              </div>
              <div class="tab-content tab-content-basic">
                <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview"> 
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="statistics-details d-flex align-items-center justify-content-between">
                        <div>
                          <p class="statistics-title">Rentals (Gcash)</p>
                          <h3 class="rate-percentage">â‚±<span id="totalGcash"></span><br />this year</h3>
                          <p id="totalGcashper" class="d-flex"></p>
                        </div>
                        <div>
                          <p class="statistics-title">Rentals (Walk in)</p>
                          <h3 class="rate-percentage">â‚±<span id="totalWalkin"></span><br />this year</h3>
                          <p id="totalWalkinper" class="d-flex"></p>
                        </div>
                        <div>
                          <p class="statistics-title">Rentals (Cash on delivery)</p>
                          <h3 class="rate-percentage">â‚±<span id="totalCOD"></span><br />this year</h3>
                          <p id="totalCODper" class="d-flex"></p>
                        </div>
                        <div class="d-none d-md-block">
                          <p class="statistics-title">Total Rental Revenue</p>
                          <h3 class="rate-percentage">â‚±<span id="totalTR"></span><br />this year</h3>
                          <p id="totalTRper" class="d-flex"></p>
                        </div>
                      </div>
                    </div>
                  </div> 
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="statistics-details d-flex align-items-center justify-content-between">
                        <div>
                          <p class="statistics-title">Cancelled Rentals</p>
                          <h3 class="rate-percentage"><span id="totalCR"></span><br />this year</h3>
                          <p id="totalCRper" class="d-flex"></p>
                        </div>
                        <div>
                          <p class="statistics-title">Overdue Rentals</p>
                          <h3 class="rate-percentage"><span id="overDueRentals" class="text-danger"></span><br />Item/bundle</h3>
                          <p class="d-flex"><span style="cursor: pointer;" onclick="sessionStorage.page='rentalStat';location.reload();">view details <i class="mdi mdi-open-in-new" style="font-size: 12px;"></i></span></p>
                        </div>
                        <div>
                          <p class="statistics-title">New Transactions</p>
                          <h3 class="rate-percentage"><span id="pendingRentals" class="text-warning"></span><br />Item/bundle</h3>
                          <p class="d-flex"><span style="cursor: pointer;" onclick="sessionStorage.page='transaction';location.reload();">view details <i class="mdi mdi-open-in-new" style="font-size: 12px;"></i></span></p>
                        </div>
                        <div class="d-none d-md-block">
                          <p class="statistics-title">Total Active Rentals</p>
                          <h3 class="rate-percentage"><span id="activeRentals" class="text-success"></span><br />Item/bundle</h3>
                          <p class="d-flex"><span style="cursor: pointer;" onclick="sessionStorage.page='rentalStat';location.reload();">view details <i class="mdi mdi-open-in-new" style="font-size: 12px;"></i></span></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
	$(document).ready(function () {
    $('#totalGcash,#totalWalkin,#totalCOD,#totalTR').html('0.00');
    $('#totalCR,#overDueRentals,#pendingRentals,#activeRentals').html('0');
    function caculatePercentage(number1, number2) {
      return (parseFloat((number1).replaceAll(',','')) / parseFloat((number2).replaceAll(',',''))) * 100;
    }
    // for Gcash
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "thisYearG"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        var this_year = data.Response;
        $('#totalGcash').html(this_year);
        $.ajax({
          type: "POST",
          url: "/glam/glamserver/assets/php/dashboardCRUD.php",
          data: {"TYPE": "lastYearG"},
          dataType: "json",
        }).done((data) => {
          if(data.Response != 0) {
            var content = $('#totalGcashper');
            var calGper = caculatePercentage(this_year, data.Response).toFixed(2);
            if(calGper > 100) {
              content.addClass('text-success').html(`<i class="mdi mdi-menu-up"></i><span>${calGper}% last year</span>`);
            }else {
              content.addClass('text-danger').html(`<i class="mdi mdi-menu-down"></i><span>${calGper}% last year</span>`);
            }
          }else {
            console.warn(`ðŸš€lastYearG => data`, data);
          }
        });
      }else {
        console.warn(`ðŸš€thisYearG => data`, data);
      }
    });
    // for Walk in
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "thisYearW"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        var this_year = data.Response;
        $('#totalWalkin').html(this_year);
        $.ajax({
          type: "POST",
          url: "/glam/glamserver/assets/php/dashboardCRUD.php",
          data: {"TYPE": "lastYearW"},
          dataType: "json",
        }).done((data) => {
          if(data.Response != 0) {
            var content = $('#totalWalkinper');
            var calGper = caculatePercentage(this_year, data.Response).toFixed(2);
            if(calGper > 100) {
              content.addClass('text-success').html(`<i class="mdi mdi-menu-up"></i><span>${calGper}% last year</span>`);
            }else {
              content.addClass('text-danger').html(`<i class="mdi mdi-menu-down"></i><span>${calGper}% last year</span>`);
            }
          }else {
            console.warn(`ðŸš€lastYearW => data`, data);
          }
        });
      }else {
        console.warn(`ðŸš€thisYearW => data`, data);
      }
    });
    // Cash on Delivery
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "thisYearCOD"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        var this_year = data.Response;
        $('#totalCOD').html(this_year);
        $.ajax({
          type: "POST",
          url: "/glam/glamserver/assets/php/dashboardCRUD.php",
          data: {"TYPE": "lastYearCOD"},
          dataType: "json",
        }).done((data) => {
          if(data.Response != 0) {
            var content = $('#totalCODper');
            var calGper = caculatePercentage(this_year, data.Response).toFixed(2);
            if(calGper > 100) {
              content.addClass('text-success').html(`<i class="mdi mdi-menu-up"></i><span>${calGper}% last year</span>`);
            }else {
              content.addClass('text-danger').html(`<i class="mdi mdi-menu-down"></i><span>${calGper}% last year</span>`);
            }
          }else {
            console.warn(`ðŸš€lastYearCOD => data`, data);
          }
        });
      }else {
        console.warn(`ðŸš€thisYearCOD => data`, data);
      }
    });
    // total revenue
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "thisYearTR"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        var this_year = data.Response;
        $('#totalTR').html(this_year);
        $.ajax({
          type: "POST",
          url: "/glam/glamserver/assets/php/dashboardCRUD.php",
          data: {"TYPE": "lastYearTR"},
          dataType: "json",
        }).done((data) => {
          if(data.Response != 0) {
            var content = $('#totalTRper');
            var calGper = caculatePercentage(this_year, data.Response).toFixed(2);
            if(calGper > 100) {
              content.addClass('text-success').html(`<i class="mdi mdi-menu-up"></i><span>${calGper}% last year</span>`);
            }else {
              content.addClass('text-danger').html(`<i class="mdi mdi-menu-down"></i><span>${calGper}% last year</span>`);
            }
          }else {
            console.warn(`ðŸš€lastYearTR => data`, data);
          }
        });
      }else {
        console.warn(`ðŸš€thisYearTR => data`, data);
      }
    });
    // total cancelled
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "thisYearCR"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        var this_year = parseInt(data.Response);
        $('#totalCR').html(this_year);
        $.ajax({
          type: "POST",
          url: "/glam/glamserver/assets/php/dashboardCRUD.php",
          data: {"TYPE": "lastYearCR"},
          dataType: "json",
        }).done((data) => {
          if(data.Response != 0) {
            var content = $('#totalCRper');
            var calGper = caculatePercentage(this_year, data.Response).toFixed(2);
            if(calGper > 100) {
              content.addClass('text-success').html(`<i class="mdi mdi-menu-up"></i><span>${calGper}% last year</span>`);
            }else {
              content.addClass('text-danger').html(`<i class="mdi mdi-menu-down"></i><span>${calGper}% last year</span>`);
            }
          }else {
            console.warn(`ðŸš€lastYearCR => data`, data);
          }
        });
      }else {
        console.warn(`ðŸš€thisYearCR => data`, data);
      }
    });
    // over due
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "overDue"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        $('#overDueRentals').html(parseInt(data.Response).toFixed(0));
      }else {
        console.warn(`ðŸš€overDue => data`, data);
      }
    });
    // new transac
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "newTrasac"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        $('#pendingRentals').html(parseInt(data.Response).toFixed(0));
      }else {
        console.warn(`ðŸš€newTrasac => data`, data);
      }
    });
    // still due
    $.ajax({
      type: "POST",
      url: "/glam/glamserver/assets/php/dashboardCRUD.php",
      data: {"TYPE": "stillDue"},
      dataType: "json",
    }).done((data) => {
      if(data.Response != 0) {
        $('#activeRentals').html(parseInt(data.Response).toFixed(0));
      }else {
        console.warn(`ðŸš€stillDue => data`, data);
      }
    });
  })
</script>
        